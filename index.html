<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>柑的TRPG跑团LOG</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <header class="site-header">
        <h1><i class="fas fa-dice-d20"></i> Call of Cthulhu</h1>
        <p class="subtitle">沉迷跑团中>ch>
    </header>
    
    <main class="container">
        <div class="intro">
            <p>点击卡片查看log</p>
        </div>
        
        <div class="log-grid">
            <!-- 日志卡片 -->
            <div class="log-card" data-log-id="log_001">
                <div class="card-header">
                    <h2 class="log-title">血色毡帽>xues
                    <span class="log-date">2023-10-27</span>
                </div>
                <div class="card-body">
                    <p class="log-summary">总消息数: <span id="log-count">0</span> 条</p>
                    <p class="log-summary">章节数: <span id="chapter-count">0</span> 章</p>
                    <p class="log-summary">角色数: <span id="character-count">0</span> 个</p>
                </div>
                <div class="card-footer">
                    <a href="log.html?log=log_001" class="read-btn">开始阅读</a>
                    <span class="status-badge">已结团</span>
                </div>
            </div>
            
            <!-- 未来可以添加更多日志卡片 -->
            <!-- <div class="log-card coming-soon">
                <div class="card-header">
                    <h2 class="log-title">新的冒险</h2>
                </div>
                <div class="card-body">
                    <p>敬请期待...</p>
                </div>
            </div> -->
        </div>
    </main>
    
    <footer class="site-footer">
        <p>© 2023 TRPG跑团日志库 | 使用 Vue.js 构建</p>
    </footer>
    
    <script src="js/utils.js"></script>
    <script>
        // 加载日志基本信息
        fetch('data/log_001.json')
            .then(response => response.json())
            .then(data => {
                if (data.logs) {
                    document.getElementById('log-count').textContent = data.logs.length;
                    
                    // 计算章节数
                    const chapters = data.chapters || [];
                    document.getElementById('chapter-count').textContent = chapters.length;
                    
                    // 计算角色数（去重）
                    const characters = new Set();
                    data.logs.forEach(log => {
                        if (log.name && log.name.toLowerCase() !== 'system') {
                            characters.add(log.name);
                        }
                    });
                    document.getElementById('character-count').textContent = characters.size;
                    
                    // 更新卡片标题和日期
                    if (data.title) {
                        document.querySelector('.log-title').textContent = data.title;
                    }
                    if (data.date) {
                        document.querySelector('.log-date').textContent = data.date;
                    }
                }
            })
            .catch(error => {
                console.error('加载日志数据失败:', error);
            });
    </script>
</body>
</html>
